{"ast":null,"code":"var _jsxFileName = \"E:\\\\MERN\\\\backend\\\\client\\\\src\\\\context\\\\userContext\\\\useAuth.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { createContext, useContext, useEffect, useMemo, useState, useCallback } from \"react\";\nimport { useNavigate, useLocation } from \"react-router-dom\";\nimport { registerUser, loginUser, logoutUser, getUser } from \"../../services/api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext({});\n\n// Export the provider as we need to wrap the entire app with it\nexport function AuthProvider({\n  children\n}) {\n  _s();\n  const [user, setUser] = useState();\n  const [message, setMessage] = useState();\n  const [error, setError] = useState();\n  const [loading, setLoading] = useState(false);\n  const [loadingInitial, setLoadingInitial] = useState(true);\n  const navigate = useNavigate();\n  const location = useLocation();\n  useEffect(() => {\n    if (error) setError(null);\n  }, [error, location.pathname]); // Include error and location.pathname in the dependency array\n\n  useEffect(() => {\n    getUser().then(data => {\n      setUser(data.user);\n    }).catch(_error => {}).finally(() => setLoadingInitial(false));\n  }, []);\n  const register = useCallback(user => {\n    setLoading(true);\n    setError(undefined);\n    registerUser(user).then(data => {\n      setUser(data.user);\n      setMessage(data.message);\n      setTimeout(() => {\n        setMessage(undefined);\n        navigate(\"/users/login\");\n      }, 2000);\n    }).catch(err => setError(err)).finally(() => setLoading(false));\n  }, [navigate]);\n  const login = useCallback(user => {\n    setLoading(true);\n    setError(undefined);\n    loginUser(user).then(data => {\n      setUser(data.user);\n      setMessage(data.message);\n      setTimeout(() => {\n        setMessage(undefined);\n        navigate(\"/users/my-account\");\n      }, 2000);\n    }).catch(err => setError(err)).finally(() => setLoading(false));\n  }, [navigate]);\n  const logout = useCallback(() => {\n    logoutUser().then(data => {\n      setUser(undefined);\n      setMessage(data.message);\n      setTimeout(() => {\n        setMessage(undefined);\n        navigate(\"/\");\n      }, 2000);\n    });\n  }, [navigate]);\n  const memoedValue = useMemo(() => ({\n    user,\n    message,\n    error,\n    loading,\n    register,\n    login,\n    logout\n  }), [user, message, error, loading, register, login, logout]);\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: memoedValue,\n    children: !loadingInitial && children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 110,\n    columnNumber: 5\n  }, this);\n}\n_s(AuthProvider, \"yrzU1dycdWPF2oVZBmAh97upKjY=\", false, function () {\n  return [useNavigate, useLocation];\n});\n_c = AuthProvider;\nexport default function useAuth() {\n  _s2();\n  return useContext(AuthContext);\n}\n_s2(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["createContext","useContext","useEffect","useMemo","useState","useCallback","useNavigate","useLocation","registerUser","loginUser","logoutUser","getUser","jsxDEV","_jsxDEV","AuthContext","AuthProvider","children","_s","user","setUser","message","setMessage","error","setError","loading","setLoading","loadingInitial","setLoadingInitial","navigate","location","pathname","then","data","catch","_error","finally","register","undefined","setTimeout","err","login","logout","memoedValue","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useAuth","_s2","$RefreshReg$"],"sources":["E:/MERN/backend/client/src/context/userContext/useAuth.tsx"],"sourcesContent":["import {\n  createContext,\n  ReactNode,\n  useContext,\n  useEffect,\n  useMemo,\n  useState,\n  useCallback,\n} from \"react\";\nimport { useNavigate, useLocation } from \"react-router-dom\";\nimport {\n  registerUser,\n  loginUser,\n  logoutUser,\n  getUser,\n} from \"../../services/api\";\n\ninterface AuthContextType {\n  user: User | undefined;\n  message: AuthMessage | undefined;\n  error: any;\n  loading: boolean;\n  register: (user: RegisterUser) => void;\n  login: (user: LoginUser) => void;\n  logout: () => void;\n}\n\nconst AuthContext = createContext<AuthContextType>({} as AuthContextType);\n\n// Export the provider as we need to wrap the entire app with it\nexport function AuthProvider({ children }: { children: ReactNode }): JSX.Element {\n  const [user, setUser] = useState<User>();\n  const [message, setMessage] = useState<AuthMessage>();\n  const [error, setError] = useState<any>();\n  const [loading, setLoading] = useState<boolean>(false);\n  const [loadingInitial, setLoadingInitial] = useState<boolean>(true);\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  useEffect(() => {\n    if (error) setError(null);\n  }, [error, location.pathname]); // Include error and location.pathname in the dependency array\n\n  useEffect(() => {\n    getUser()\n      .then((data) => {\n        setUser(data.user);\n      })\n      .catch((_error) => {})\n      .finally(() => setLoadingInitial(false));\n  }, []);\n\n  const register = useCallback((user: RegisterUser) => {\n    setLoading(true);\n    setError(undefined);\n    registerUser(user)\n      .then((data) => {\n        setUser(data.user);\n        setMessage(data.message);\n        setTimeout(() => {\n          setMessage(undefined);\n          navigate(\"/users/login\");\n        }, 2000);\n      })\n      .catch((err) => setError(err))\n      .finally(() => setLoading(false));\n  }, [navigate]);\n\n  const login = useCallback((user: LoginUser) => {\n    setLoading(true);\n    setError(undefined);\n    loginUser(user)\n      .then((data) => {\n        setUser(data.user);\n        setMessage(data.message);\n        setTimeout(() => {\n          setMessage(undefined);\n          navigate(\"/users/my-account\");\n        }, 2000);\n      })\n      .catch((err) => setError(err))\n      .finally(() => setLoading(false));\n  }, [navigate]);\n\n  const logout = useCallback(() => {\n    logoutUser().then((data) => {\n      setUser(undefined);\n      setMessage(data.message);\n      setTimeout(() => {\n        setMessage(undefined);\n        navigate(\"/\");\n      }, 2000);\n    });\n  }, [navigate]);\n\n  const memoedValue = useMemo(\n    () => ({\n      user,\n      message,\n      error,\n      loading,\n      register,\n      login,\n      logout,\n    }),\n    [user, message, error, loading, register, login, logout]\n  );\n\n  return (\n    <AuthContext.Provider value={memoedValue}>\n      {!loadingInitial && children}\n    </AuthContext.Provider>\n  );\n}\n\nexport default function useAuth() {\n  return useContext(AuthContext);\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}