{"ast":null,"code":"import{ADD_TO_CART,REMOVE_ITEM,CHECKOUT,CLEAR}from\"./cartTypes\";const Storage=cartItems=>{localStorage.setItem(\"cartItems\",JSON.stringify(cartItems.length>0?cartItems:[]));};export const sumItems=cartItems=>{Storage(cartItems);let itemCount=cartItems.length;let total=cartItems.reduce((total,item)=>total+item.fee,0).toFixed(2);return{itemCount,total};};const CartReducer=(state,action)=>{switch(action.type){case ADD_TO_CART:if(!state.cartItems.find(item=>item._id===action.payload._id)){state.cartItems.push({...action.payload});}return{...state,...sumItems(state.cartItems),cartItems:[...state.cartItems]};case REMOVE_ITEM:return{...state,...sumItems(state.cartItems.filter(item=>item._id!==action.payload._id)),cartItems:[...state.cartItems.filter(item=>item._id!==action.payload._id)]};case CHECKOUT:return{cartItems:[],checkout:true,...sumItems([])};case CLEAR:return{cartItems:[],...sumItems([])};default:return state;}};export default CartReducer;","map":{"version":3,"names":["ADD_TO_CART","REMOVE_ITEM","CHECKOUT","CLEAR","Storage","cartItems","localStorage","setItem","JSON","stringify","length","sumItems","itemCount","total","reduce","item","fee","toFixed","CartReducer","state","action","type","find","_id","payload","push","filter","checkout"],"sources":["E:/MERN/backend/client/src/context/cartContext/cartReducer.tsx"],"sourcesContent":["import { ADD_TO_CART, REMOVE_ITEM, CHECKOUT, CLEAR } from \"./cartTypes\";\n\nconst Storage = (cartItems: CartPet[]) => {\n  localStorage.setItem(\n    \"cartItems\",\n    JSON.stringify(cartItems.length > 0 ? cartItems : [])\n  );\n};\n\nexport const sumItems = (cartItems: CartPet[]) => {\n  Storage(cartItems);\n  let itemCount = cartItems.length;\n  let total = cartItems.reduce((total, item) => total + item.fee, 0).toFixed(2);\n  return { itemCount, total };\n};\n\nconst CartReducer = (state: any, action: CartActionType) => {\n  switch (action.type) {\n    case ADD_TO_CART:\n      if (\n        !state.cartItems.find(\n          (item: CartPet) => item._id === action.payload._id\n        )\n      ) {\n        state.cartItems.push({\n          ...action.payload,\n        });\n      }\n\n      return {\n        ...state,\n        ...sumItems(state.cartItems),\n        cartItems: [...state.cartItems],\n      };\n\n    case REMOVE_ITEM:\n      return {\n        ...state,\n        ...sumItems(\n          state.cartItems.filter(\n            (item: CartPet) => item._id !== action.payload._id\n          )\n        ),\n        cartItems: [\n          ...state.cartItems.filter(\n            (item: CartPet) => item._id !== action.payload._id\n          ),\n        ],\n      };\n\n    case CHECKOUT:\n      return {\n        cartItems: [],\n        checkout: true,\n        ...sumItems([]),\n      };\n\n    case CLEAR:\n      return {\n        cartItems: [],\n        ...sumItems([]),\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport default CartReducer;\n"],"mappings":"AAAA,OAASA,WAAW,CAAEC,WAAW,CAAEC,QAAQ,CAAEC,KAAK,KAAQ,aAAa,CAEvE,KAAM,CAAAC,OAAO,CAAIC,SAAoB,EAAK,CACxCC,YAAY,CAACC,OAAO,CAClB,WAAW,CACXC,IAAI,CAACC,SAAS,CAACJ,SAAS,CAACK,MAAM,CAAG,CAAC,CAAGL,SAAS,CAAG,EAAE,CACtD,CAAC,CACH,CAAC,CAED,MAAO,MAAM,CAAAM,QAAQ,CAAIN,SAAoB,EAAK,CAChDD,OAAO,CAACC,SAAS,CAAC,CAClB,GAAI,CAAAO,SAAS,CAAGP,SAAS,CAACK,MAAM,CAChC,GAAI,CAAAG,KAAK,CAAGR,SAAS,CAACS,MAAM,CAAC,CAACD,KAAK,CAAEE,IAAI,GAAKF,KAAK,CAAGE,IAAI,CAACC,GAAG,CAAE,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,CAAC,CAC7E,MAAO,CAAEL,SAAS,CAAEC,KAAM,CAAC,CAC7B,CAAC,CAED,KAAM,CAAAK,WAAW,CAAGA,CAACC,KAAU,CAAEC,MAAsB,GAAK,CAC1D,OAAQA,MAAM,CAACC,IAAI,EACjB,IAAK,CAAArB,WAAW,CACd,GACE,CAACmB,KAAK,CAACd,SAAS,CAACiB,IAAI,CAClBP,IAAa,EAAKA,IAAI,CAACQ,GAAG,GAAKH,MAAM,CAACI,OAAO,CAACD,GACjD,CAAC,CACD,CACAJ,KAAK,CAACd,SAAS,CAACoB,IAAI,CAAC,CACnB,GAAGL,MAAM,CAACI,OACZ,CAAC,CAAC,CACJ,CAEA,MAAO,CACL,GAAGL,KAAK,CACR,GAAGR,QAAQ,CAACQ,KAAK,CAACd,SAAS,CAAC,CAC5BA,SAAS,CAAE,CAAC,GAAGc,KAAK,CAACd,SAAS,CAChC,CAAC,CAEH,IAAK,CAAAJ,WAAW,CACd,MAAO,CACL,GAAGkB,KAAK,CACR,GAAGR,QAAQ,CACTQ,KAAK,CAACd,SAAS,CAACqB,MAAM,CACnBX,IAAa,EAAKA,IAAI,CAACQ,GAAG,GAAKH,MAAM,CAACI,OAAO,CAACD,GACjD,CACF,CAAC,CACDlB,SAAS,CAAE,CACT,GAAGc,KAAK,CAACd,SAAS,CAACqB,MAAM,CACtBX,IAAa,EAAKA,IAAI,CAACQ,GAAG,GAAKH,MAAM,CAACI,OAAO,CAACD,GACjD,CAAC,CAEL,CAAC,CAEH,IAAK,CAAArB,QAAQ,CACX,MAAO,CACLG,SAAS,CAAE,EAAE,CACbsB,QAAQ,CAAE,IAAI,CACd,GAAGhB,QAAQ,CAAC,EAAE,CAChB,CAAC,CAEH,IAAK,CAAAR,KAAK,CACR,MAAO,CACLE,SAAS,CAAE,EAAE,CACb,GAAGM,QAAQ,CAAC,EAAE,CAChB,CAAC,CAEH,QACE,MAAO,CAAAQ,KAAK,CAChB,CACF,CAAC,CAED,cAAe,CAAAD,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}